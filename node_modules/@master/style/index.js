!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@master/style"]=t():e["@master/style"]=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function s(e,t){return e+":"+(t.unit?t.value+t.unit:t.value)+(t.important?"!important":"")}e.r(t),e.d(t,{Style:()=>Style,StyleSheet:()=>StyleSheet,sheets:()=>z});const i=/^([+-.]?\d+(\.?\d+)?)(.*)?/;function n(e,t,s){let n="",l="",r="";if("number"==typeof e)n=e,l=t||"";else{if(s){const[t,i]=e.split("/");for(const e in s)if(t.startsWith(e)){const s=t[e.length];if(!s||"-"===s)return n="rgb(var(--"+t+")"+(i?"/"+i:"")+")",{value:n,unit:l,unitToken:r}}}if(t){const s=e.match(i);if(s){if(e.includes("/")){const t=e.split("/");return{value:+t[0]/+t[1]*100+"%",unit:l,unitToken:r}}return n=+s[1],l=r=s[3]||"",l||("rem"!==t&&"em"!==t||(n/=16),l=t||""),{value:n,unit:l,unitToken:r}}}n=(-1===e.indexOf("calc(")?e:function(e){const t=e=>"+"===e||"-"===e||"*"===e||"/"===e;let s,i="",n="",l=!1;function r(){s=null,n=""}for(let o=0;o<e.length;o++){const c=e[o];if("("===c||")"===c)l=")"===c,i+=n+c,r();else if(","===c)i+=n+c+" ",r();else{switch(s){case 1:break;case 2:if(t(c)){i+=n+" "+c+" ",r();continue}break;default:l&&(n+=" "),isNaN(+c)?t(c)||(s=1):s=2}n+=c}}return n&&(i+=n),i}(e)).replace(/\$\(((\w|-)+)\)/g,"var(--$1)")}return{value:n,unit:l,unitToken:r}}const l=[":disabled",":active",":focus",":hover"],r=[",",".","#","[","!","*",">","+","~",":","@"],o="undefined"!=typeof document;let c;o&&(c=document.createElement("style"),c.id="master-styles");const a="max-width",h="min-width",f="undefined"!=typeof window,u=f?window.MutationObserver:Object;class StyleSheet extends u{constructor(e){if(super((e=>{const t={},s=[],i=[],n=[],l=(e,t,s)=>{for(let i=0;i<e.length;i++){const n=e[i];if(n.classList&&!s.includes(n)){s.push(n),n.classList.forEach((e=>{t?o(e):r(e)}));const e=n.children;e.length&&l(e,t,s)}}},r=e=>{e in t?t[e]++:t[e]=1},o=e=>{e in t?t[e]--:t[e]=-1};for(let t=0;t<e.length;t++){const r=e[t],{addedNodes:o,removedNodes:c,type:a,target:h,oldValue:f}=r;if("attributes"===a){if(h.className===f||s.find((e=>e.target===h)))continue;s.push(r)}else o.length&&l(o,!1,i),c.length&&l(c,!0,n)}if(s.length||Object.keys(t).length){for(const{oldValue:e,target:t}of s){if(i.includes(t)||n.includes(t))continue;const s=e?e.split(" "):[],l=t.classList;l.length&&l.forEach((e=>{s.includes(e)||r(e)}));for(const e of s)l.contains(e)||o(e)}for(const e in t){const s=t[e],i=(this.countOfName[e]||0)+s;0===i?(delete this.countOfName[e],this.delete(e)):(e in this.countOfName||this.findAndInsert(e),this.countOfName[e]=i)}}})),this.container=e,this.styles=[],this.styleOfName={},this.countOfName={},o){if(e){const t=e.querySelector('[id="master-styles"]');if(t){this.element=t;const e=(t,s)=>{if(t.selectorText){const e=t.selectorText.split(", ")[0].split(" ");let i;for(let t=e.length-1;t>=0;t--){const s=e[t];if("."===s[0]){i=s.slice(1);break}}let n="";for(let e=0;e<i.length;e++){const t=i[e],s=i[e+1];if("\\"===t){if(e++,"\\"!==s){n+=s;continue}}else if(r.includes(t))break;n+=t}if(!(n in this.styleOfName)){const e=StyleSheet.findAndNew(n);e&&(e.cssRule=null!=s?s:t,this.styles.push(e),this.styleOfName[e.name]=e)}}else if(t.cssRules)for(let i=0;i<t.cssRules.length;i++)e(t.cssRules[i],null!=s?s:t)};e(t.sheet,void 0)}else this.element=c.cloneNode(),null==e||e.prepend(this.element)}z.push(this)}}observe(e,t={subtree:!0,childList:!0}){return t.subtree&&e.querySelectorAll("[class]").forEach((e=>{e.classList.forEach((e=>{e in this.countOfName?this.countOfName[e]++:(this.countOfName[e]=1,this.findAndInsert(e))}))})),super.observe(e,Object.assign(Object.assign({},t),{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})),this}disconnect(){super.disconnect(),this.styleOfName={},this.countOfName={},this.styles.length=0;const e=this.element.sheet;for(let t=e.cssRules.length-1;t>=0;t--)e.deleteRule(t)}static findAndNew(e){for(const t of this.Styles){const s=t.match(e);if(s)return new t(e,s)}}static find(e){for(const t of this.Styles){if(t.match(e))return t}}static refresh(){for(const e of z)e.refresh()}refresh(){if(!this.element)return;const e=c.cloneNode();this.element.replaceWith(e),this.element=e,this.styles.length=0,this.styleOfName={};for(const e in this.countOfName)this.findAndInsert(e)}destroy(){this.element.remove(),this.disconnect(),z.splice(z.indexOf(this),1)}insert(e){if(this.styleOfName[e.name])return;const t=e.text;let s;const i=this.styles.length-1,n=e.media,l=e.order,r=e.prioritySelectorIndex,o=e.hasWhere,c=(e,t,s,i)=>{let n,c,a=0;t&&(a=e.findIndex(t)),s&&(c=e.findIndex(s)),-1===a&&(a=e.length),void 0!==c&&-1!==c||(c=e.length),n=e.slice(a,c);for(let e=0;e<n.length;e++){const t=n[e];if(!(-1===t.prioritySelectorIndex||i&&i(t))&&(t.prioritySelectorIndex<r||t.prioritySelectorIndex===r&&(o&&!t.hasWhere||t.order>=l)))return a+e}return a+n.length};if(n){const e=this.styles.findIndex((e=>e.media));if(-1!==e){const t=n.features[a],f=n.features[h];if(t&&f){const n=t.value-f.value;for(let t=i;t>=e;t--){s=t;const i=this.styles[t],l=i.media,f=l.features[a],u=l.features[h];if(!f||!u){s++;break}const d=f.value-u.value;if(d===n){if(o!==i.hasWhere)continue;if(-1!==r){const i=[this.styles[t]];for(let s=t-1;s>=e;s--){const e=this.styles[s];if(e.hasWhere!==o)break;const t=e.media,n=t.features[a],l=t.features[h];if(!n||!l||n.value-l.value!==d)break;i.unshift(this.styles[s])}s=c(this.styles,(e=>e.media&&-1!==e.prioritySelectorIndex&&e.media.features[h]&&e.media.features[a]))}break}if(d>n)break}}else if(f)for(let t=e;t<=i;t++){s=t;const e=this.styles[t],n=e.media,u=n.features[a],d=n.features[h];if(u){if(d)break;continue}const m=null==d?void 0:d.value;if(m===f.value){if(!o&&e.hasWhere){s++;continue}if(-1!==r)s=c(this.styles,(e=>e.media),(e=>e.media&&-1!==e.prioritySelectorIndex&&e.media.features[h]&&e.media.features[a]),(e=>!e.media.features[h]&&!e.media.features[a]));else for(let e=t;e<=i;e++){const t=this.styles[e],i=t.media,n=i.features[h];if(!i.features[a]){if(t.hasWhere!==o||n.value!==m||t.order>=l)break;s=e+1}}break}if(m>f.value)break;s++}else if(t)for(let n=i;n>=e;n--){s=n;const i=this.styles[n],f=i.media,u=f.features[a];if(f.features[h])continue;const d=null==u?void 0:u.value;if(!d||d>t.value){s++;break}if(d===t.value){if(o&&!i.hasWhere)continue;if(-1!==r)s=c(this.styles,(e=>e.media),(e=>e.media&&-1!==e.prioritySelectorIndex&&e.media.features[h]&&e.media.features[a]),(e=>!e.media.features[h]&&!e.media.features[a]));else{const t=[this.styles[n]];for(let s=n-1;s>=e;s--){const e=this.styles[s],i=e.media,n=i.features[h],l=i.features[a];if(!(n||l&&l.value===d&&e.hasWhere===o))break;t.unshift(e)}for(let e=0;e<t.length;e++){const i=t[e];if(!i.media.features[h]){if(i.order>=l)break;s=n-t.length+2+e}}}break}}}if(void 0===s)if(-1===e)s=i+1;else if(-1!==r)s=e+c(this.styles.slice(e),void 0,(e=>e.media.features[a]||e.media.features[h]));else if(o){let t=e;for(;t<this.styles.length;t++){const e=this.styles[t];if(-1!==e.prioritySelectorIndex||!e.hasWhere||e.order>=l){s=t;break}}void 0===s&&(s=t)}else for(let t=e;t<=i;t++){s=t;const e=this.styles[t],i=e.media;if(-1!==e.prioritySelectorIndex||i.features[a]||i.features[h])break;if(e.hasWhere)s++;else if(e.order>=l)break}}else if(-1===r)if(o)s=this.styles.findIndex((e=>!e.hasWhere||e.media||-1!==e.prioritySelectorIndex||e.order>=l)),-1===s&&(s=i+1);else{let e=0;for(;e<this.styles.length;e++){const t=this.styles[e];if(t.media||!t.hasWhere&&(t.order>=l||-1!==t.prioritySelectorIndex)){s=e;break}}void 0===s&&(s=e)}else s=c(this.styles,void 0,(e=>e.media));try{if(this.element){const i=this.element.sheet;i.insertRule(t,s),e.cssRule=i.cssRules[s]}this.styles.splice(s,0,e),this.styleOfName[e.name]=e}catch(e){}}delete(e){const t=this.element.sheet,s=e=>{const s=this.styleOfName[e];if(null==s?void 0:s.cssRule)for(let e=0;e<t.cssRules.length;e++){t.cssRules[e]===s.cssRule&&(t.deleteRule(e),this.styles.splice(e,1),delete this.styleOfName[s.name])}};if(e in Style.classes)for(const t of Style.classes[e])t in this.countOfName||s(t);else s(e)}findAndInsert(e){const t=e=>{const t=StyleSheet.findAndNew(e);t&&this.insert(t)};if(e in Style.classes)for(const s of Style.classes[e])t(s);else t(e)}}function d(e){const t=e.match(/.{1,2}/g);return[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]}function m(e,t,s){return((1<<24)+(e<<16)+(t<<8)+s).toString(16).slice(1)}StyleSheet.Styles=[],f&&(window.MasterStyleSheet=StyleSheet);const p="matches",y="semantics",g="symbol",b="max-width",v="min-width",x="motion",k="reduce",O="reduced-motion",S="::scrollbar",N="::slider-thumb",w="::slider-runnable-track",j="::search",R="::meter",I="::resizer",W="::progress",E="px",A=["!","*",">","+","~",":","[","@","_"],T=[...A,void 0,"."],M={"(":")","'":"'"},$=new RegExp(S,"g"),_=new RegExp(j,"g"),L=new RegExp(R,"g"),V=new RegExp(w,"g"),q=new RegExp(N,"g"),C=new RegExp(I,"g"),P=new RegExp(W,"g"),z=[];class Style{constructor(e,t){this.name=e,this.matching=t,this.at={},this.prioritySelectorIndex=-1;const i=this.constructor;if(void 0===t&&!(t=i.match(e)))return;let r,o,{semantics:c,unit:a,colors:h,key:f,values:u,fixedSelector:d,colorful:m,breakpoints:T,mediaQueries:z}=i,Q=e;if(m||(h=null),t.origin===y)r=t.value,o=Q.slice(t.value.length),this.value=c[t.value];else{if(t.origin===p){const e=Q.indexOf(":");this.prefix=Q.slice(0,e+1),this.prefix.includes("(")?(this.prefix=void 0,r=Q):r=Q.slice(e+1)}else t.origin===g&&(this.symbol=Q[0],r=Q.slice(1));let e,s="",i=[],l=0;!function t(o,c,f=""){let u;for(o&&(")"===o&&"$"===s.slice(-1)&&(u=s.length-1),s+=r[l++]);l<r.length;l++){const d=r[l];if(d===o){s+=d,void 0!==u&&(s=s.slice(0,u)+s.slice(u).replace(/\$\((.*)\)/,"var(--$1)")),c||("'"===o?i.push(s):(e=n(s,a,h),i.push(e.value+e.unit)),f="",s="");break}if(d in M)t(M[d],void 0===c?0:c+1,f);else if(";"!==d||"'"===o&&"path"!==f){if(!o){if("."===d){if(isNaN(+r[l+1]))break;"-"===r[l-1]&&(s+="0")}else{if(","===d){e=n(s,a,h),i.push(e.value+e.unit,","),s="";continue}if("#"===d&&(s||i.length&&";"!==r[l-1])||A.includes(d))break}f+=d}s+=d}else o?s+=" ":(e=n(s,a,h),i.push(e.value+e.unit),s="")}}(),s&&(e=n(s,a,h),i.push(e.value+e.unit)),o=r.slice(l),1===i.length?e?(this.value=e.value,this.unit=e.unit):(this.value=i[0],this.unit=""):this.value=i.join(" ")}o.includes(S)&&(o=o.replace($,"::-webkit-scrollbar")),o.includes(j)&&(o=o.replace(_,"::-webkit-search")),o.includes(N)&&(o=o.replace(q,"::-webkit-slider-thumb")),o.includes(w)&&(o=o.replace(V,"::-webkit-slider-runnable-track")),o.includes(R)&&(o=o.replace(L,"::-webkit-meter")),o.includes(I)&&(o=o.replace(C,"::-webkit-resizer")),o.includes(W)&&(o=o.replace(P,"::-webkit-progress")),this.parseValue&&(this.value=this.parseValue),u&&this.value in u&&(this.value=u[this.value]),"!"===o[0]&&(this.important=!0,o=o.slice(1));const F=o.split("@");let B=F[0].replace(/\_/g," ");if(B){this.hasWhere=B.includes(":where(");for(let e=0;e<l.length;e++)if(B.includes(l[e])){this.prioritySelectorIndex=e;break}}this.selector=B;for(let e=1;e<F.length;e++){const t=F[e];if(t)if(t.startsWith("dark")||t.startsWith("light"))this.colorScheme=t;else if("rtl"===t||"ltr"===t)this.direction=t;else{let e,s;const i=t.indexOf("_");if(-1!==i)e=t.slice(0,i),s=t.slice(i);else{const i=t.indexOf("(");-1!==i&&(e=t.slice(0,i),s=t.slice(i))}if(!e){e="media";const i=[];this.media={token:t,features:{}};const l=t.split("&");for(const e of l)if("all"===e||"print"===e||"screen"===e||"speech"===e)this.media.type=e;else if("🖨"===e)this.media.type="print";else if("landscape"===e||"portrait"===e)i.push("(orientation:"+e+")");else if(e===x||e===O)i.push("(prefers-reduced-motion:"+(e===x?"no-preference":k)+")");else if(e in z)i.push(z[e]);else{const t={token:e};let s="",l="",r=0;switch(e.startsWith("<=")?(l="<=",s=b):e.startsWith(">=")||T[e]?(l=">=",s=v):e.startsWith(">")?(l=">",s=v,r=.02):e.startsWith("<")&&(l="<",s=b,r=-.02),s){case b:case v:const o=l?e.replace(l,""):e,c=T[o];c?Object.assign(t,n(c,E)):Object.assign(t,n(o,E)),t.unit===E&&(t.value+=r),this.media.features[s]=t,i.push("("+s+":"+(t.value+t.unit)+")")}}s="",this.media.type&&(s=this.media.type),i.length&&(s+=(s?" and ":"")+i.join(" and "))}s&&(this.at[e]=s.replace(/\_/g," "))}}let D="";this.colorScheme&&(D+="."+this.colorScheme+" "),this.direction&&(D+="[dir="+this.direction+"] ");const G=(B?B+" ":"")+(d||"");this.text=D+"."+CSS.escape(this.name)+G+(this.name in Style.relations?Style.relations[this.name].map((e=>", "+D+"."+e+G)).join(""):"")+"{"+("object"==typeof this.value?Object.keys(this.value).map((e=>s(e,Object.assign(Object.assign({},this),{unit:"",value:this.value[e]})))).join(";"):this.props?Object.keys(this.props).map((e=>s(e,this.props[e]))).join(";"):s(f,this))+"}";for(const e of Object.keys(this.at).sort(((e,t)=>"supports"===t?-1:1)))this.text="@"+e+" "+this.at[e]+"{"+this.text+"}";void 0===this.order&&(this.order=0)}static match(e){if(this.semantics)for(const t in this.semantics)if(e===t||e.startsWith(t)&&T.includes(e[t.length]))return{origin:y,value:t};return this.matches&&this.matches.test(e)||this.colorStarts&&(e.match("^"+this.colorStarts+"(#|(rgb|hsl)\\(.*\\))((?!;).)*$")||this.colorNames.length&&e.match("^"+this.colorStarts+"("+this.colorNames.join("|")+")")&&-1===e.indexOf(";"))?{origin:p}:this.symbol&&e.startsWith(this.symbol)?{origin:g}:this.key&&e.startsWith(this.key+":")?{origin:p}:void 0}static extend(e,t,s=!0){if(!t)return;const i=(e,s,i)=>{var n;for(const l in t){const r=t[l];null==r?l in e&&(null==i||i(l),delete e[l]):e[l]=null!==(n=null==s?void 0:s(l,r))&&void 0!==n?n:r}};switch(e){case"classes":i(this.classes,((e,t)=>{if(e in this.classes)for(const t in this.relations){const s=this.relations[t],i=s.indexOf(e);-1!==i&&(s.length>1?s.splice(i,1):delete this.relations[t])}const s=Array.isArray(t)?t:t.replace(/(?:\n(?:\s*))+/g," ").trim().split(" ");for(const t of s)t in this.relations?this.relations[t].push(e):this.relations[t]=[e];return s}),(e=>{for(const t of this.classes[e]){const s=this.relations[t];s.length>1?s.splice(s.indexOf(e),1):delete this.relations[t]}}));break;case"colors":i(this.colors,((e,t)=>{const s=this.colorNames.indexOf(e);-1!==s?null==F||F.deleteRule(s):this.colorNames.push(e);const i={};"string"==typeof t&&(t={"":t});const n=""in t;n&&(i[""]=d(t[""]).join(" "));let l=!1;for(const e in t)if(e&&+e>=100){l=!0;break}if(l)for(const e in t)i[e]=d(t[e]).join(" ");else if(!n||Object.keys(t).length>1){let e,s,n=0,l="0"in t?d(t[0]):[255,255,255];const r=[],o=()=>{const o=e-n,c=s.map(((e,t)=>(e-l[t])/o));for(const e of r){const s=e-n,r=l.map(((e,t)=>Math.round(e+c[t]*s)));i[e]=r.join(" "),t[e]=m.call(this,...r)}};for(let c=1;c<100;c++){const a=c%2==0;c in t?(r.length?(e=c,s=d(t[c]),o(),r.length=0,l=s):l=d(t[c]),n=c,a&&(i[c]=l.join(" "))):a&&r.push(c)}r.length&&(e=100,s="100"in t?d(t[100]):[0,0,0],o())}if(!n){const e=t[l?"500":"50"];t[""]=e,i[""]=d(e).join(" ")}return null==F||F.insertRule(function(e,t){let s=":root{";for(const i in t)s+="--"+e+(i?"-"+i:"")+":"+t[i]+";";return s+="}",s}(e,i),-1===s?Object.keys(this.colors).length:s),this.rgbColors[e]=i,t}),(e=>{const t=this.colorNames.indexOf(e);-1!==t&&this.colorNames.splice(t,1),null==F||F.deleteRule(t),delete this.rgbColors[e]}));break;default:let t=this[e];t||(t=this[e]={}),i(t)}s&&StyleSheet.refresh()}}let Q,F;if(Style.unit="rem",Style.rgbColors={},Style.mediaQueries={},Style.sheets=z,Style.colors={},Style.classes={},Style.colorNames=[],Style.relations={},"undefined"!=typeof window&&(window.MasterStyle=Style),"undefined"!=typeof document){const e=document.head.querySelector('[id="master-colors"]');if(e){const t=document.head.querySelector('[name="master:colors"]');if(t&&t.content){Q=e;const s={},i=t.content.split(",");for(let e=0;e<Q.sheet.cssRules.length;e++){const t=Q.sheet.cssRules[e].cssText.slice(8,-1).split(";").slice(0,-1);if(t.length){const n=i[e],l=n.length+2,r={};for(const e of t){let[t,s]=e.split(":");t=t.trim().slice(l),t&&(t=t.slice(1)),r[t]=m.call(void 0,...s.split(" ").map((e=>+e)))}s[n]=r}}Style.extend("colors",s),F=Q.sheet}}Q||(Q=document.createElement("style"),Q.id="master-colors",document.head.prepend(Q),F=Q.sheet)}return t})()}));